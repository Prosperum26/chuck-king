<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Chuck King - AI Rage Game</title>
    <link rel="stylesheet" href="styles/main.css" />
  </head>

  <body style="display: flex; align-items: center; justify-content: center;">
    <!-- Auto-start game when page loads, show API modal only when requested -->
    <div id="api-key-modal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h2>âš™ï¸ Cáº¥u HÃ¬nh AI API (OpenAI)</h2>
          <p style="font-size: 0.85em; margin-top: 5px; color: #666">
            TÃ¹y chá»n - Äá»ƒ trá»‘ng Ä‘á»ƒ chÆ¡i vá»›i hardcoded messages
          </p>
        </div>
        <div class="modal-body">
          <p class="modal-description">
            ğŸ¤– <strong>OpenAI API</strong> sáº½ sinh ra nhá»¯ng lá»i trÃªu chá»c AI
            ngáº«u nhiÃªn khi báº¡n chÆ¡i. <br /><br />
            <strong>ChÆ°a cÃ³ API Key?</strong>
            <a
              href="docs/GET_API_KEY.md"
              target="_blank"
              style="color: #0066cc; text-decoration: underline"
              >ğŸ“– Xem hÆ°á»›ng dáº«n láº¥y API Key</a
            >
          </p>

          <!-- Endpoint Info -->
          <div class="form-group">
            <label for="api-endpoint">
              ğŸ”— OpenAI API Endpoint:
              <span
                title="ÄÃ¢y lÃ  URL Ä‘á»ƒ gá»i API OpenAI ChatGPT"
                style="cursor: help; color: #0066cc"
                >â“˜</span
              >
            </label>
            <input
              type="text"
              id="api-endpoint"
              class="form-input"
              placeholder="https://api.openai.com/v1/chat/completions"
              value="https://api.openai.com/v1/chat/completions"
              readonly
              title="Endpoint máº·c Ä‘á»‹nh cho OpenAI API"
            />
            <small style="color: #666; margin-top: 3px; display: block">
              ğŸ’¡ Máº·c Ä‘á»‹nh - khÃ´ng cáº§n thay Ä‘á»•i
            </small>
          </div>

          <!-- API Key Info -->
          <div class="form-group">
            <label for="api-key">
              ğŸ”‘ API Key (sk-...):
              <span
                title="API key Ä‘á»ƒ authenticate vá»›i OpenAI - Báº¯t Ä‘áº§u báº±ng 'sk-'"
                style="cursor: help; color: #0066cc"
                >â“˜</span
              >
            </label>
            <input
              type="password"
              id="api-key"
              class="form-input"
              placeholder="sk-... (láº¥y tá»« https://platform.openai.com/api-keys)"
              autocomplete="off"
            />
            <small style="color: #666; margin-top: 3px; display: block">
              âš ï¸ Giá»¯ bÃ­ máº­t - KhÃ´ng share vá»›i ai
            </small>
          </div>

          <!-- Status Message -->
          <div id="api-status" class="api-status hidden"></div>

          <!-- Test Button -->
          <button id="test-api-btn" class="btn btn-secondary">
            ğŸ” Kiá»ƒm Tra API
          </button>
        </div>

        <!-- Help Section -->
        <div class="modal-help">
          <strong>ğŸ’¡ Máº¹o:</strong>
          <ul style="margin: 8px 0 0 20px; padding: 0">
            <li>Äá»ƒ trá»‘ng (bá» qua) â†’ chÆ¡i vá»›i hardcoded messages</li>
            <li>
              OpenAI cáº¥p <strong>$5 free credit</strong> cho ngÆ°á»i dÃ¹ng má»›i
            </li>
            <li>
              Äá»ƒ láº¥y API key:
              <a
                href="https://platform.openai.com/api-keys"
                target="_blank"
                style="color: #0066cc"
                >Truy cáº­p OpenAI Dashboard</a
              >
            </li>
          </ul>
        </div>

        <div class="modal-footer">
          <div class="modal-footer-start" id="modal-footer-start">
            <button id="skip-api-btn" class="btn btn-outline">
              ğŸ“­ Bá» Qua (ChÆ¡i khÃ´ng API)
            </button>
            <button id="start-game-btn" class="btn btn-primary">
              â–¶ï¸ Báº¯t Äáº§u Game
            </button>
          </div>
          <div class="modal-footer-settings hidden" id="modal-footer-settings">
            <button id="close-api-btn" class="btn btn-outline">ÄÃ³ng</button>
            <button id="save-api-btn" class="btn btn-primary">
              LÆ°u vÃ  Ã¡p dá»¥ng
            </button>
          </div>
        </div>
      </div>
    </div>

    <div id="game-container" class="hidden">
      <canvas id="game-canvas"></canvas>
      <div id="ui-overlay">
        <div id="ai-dialog" class="ai-dialog hidden">
          <div id="ai-dialog-content" class="ai-dialog-content">
            <span id="ai-message"></span>
          </div>
        </div>
        <div id="controls">
          <button
            id="toggle-api-btn"
            class="control-btn"
            title="Báº­t/táº¯t cá»­a sá»• cáº¥u hÃ¬nh API"
          >
            âš™ï¸ API
          </button>
          <button id="mute-ai-btn" class="control-btn">ğŸ”‡ Mute AI</button>
        </div>
        <div id="stats">
          <div>Deaths: <span id="death-count">0</span></div>
          <div>Idle: <span id="idle-time">0.0s</span></div>
          <div>Falls: <span id="fall-count">0</span></div>
        </div>
      </div>
    </div>

    <script type="module" src="./js/main.js"></script>
  </body>
</html>
