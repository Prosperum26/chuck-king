<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Chuck King - AI Rage Game</title>
    <link rel="stylesheet" href="styles/main.css">
</head>


<body>
    <!-- API Key Input Modal (·∫©n khi load, ch·ªâ m·ªü khi b·∫•m n√∫t ‚öôÔ∏è API) -->
    <div id="api-key-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚öôÔ∏è C·∫•u H√¨nh AI API (OpenAI)</h2>
                <p style="font-size: 0.85em; margin-top: 5px; color: #666;">T√πy ch·ªçn - ƒê·ªÉ tr·ªëng ƒë·ªÉ ch∆°i v·ªõi hardcoded messages</p>
            </div>
            <div class="modal-body">
                <p class="modal-description">
                    ü§ñ <strong>OpenAI API</strong> s·∫Ω sinh ra nh·ªØng l·ªùi tr√™u ch·ªçc AI ng·∫´u nhi√™n khi b·∫°n ch∆°i.
                    <br><br>
                    <strong>Ch∆∞a c√≥ API Key?</strong> 
                    <a href="docs/GET_API_KEY.md" target="_blank" style="color: #0066cc; text-decoration: underline;">üìñ Xem h∆∞·ªõng d·∫´n l·∫•y API Key</a>
                </p>
                
                <!-- Endpoint Info -->
                <div class="form-group">
                    <label for="api-endpoint">
                        üîó OpenAI API Endpoint:
                        <span title="ƒê√¢y l√† URL ƒë·ªÉ g·ªçi API OpenAI ChatGPT" style="cursor: help; color: #0066cc;">‚ìò</span>
                    </label>
                    <input 
                        type="text" 
                        id="api-endpoint" 
                        class="form-input" 
                        placeholder="https://api.openai.com/v1/chat/completions"
                        value="https://api.openai.com/v1/chat/completions"
                        readonly
                        title="Endpoint m·∫∑c ƒë·ªãnh cho OpenAI API">
                    <small style="color: #666; margin-top: 3px; display: block;">
                        üí° M·∫∑c ƒë·ªãnh - kh√¥ng c·∫ßn thay ƒë·ªïi
                    </small>
                </div>
                
                <!-- API Key Info -->
                <div class="form-group">
                    <label for="api-key">
                        üîë API Key (sk-...):
                        <span title="API key ƒë·ªÉ authenticate v·ªõi OpenAI - B·∫Øt ƒë·∫ßu b·∫±ng 'sk-'" style="cursor: help; color: #0066cc;">‚ìò</span>
                    </label>
                    <input 
                        type="password" 
                        id="api-key" 
                        class="form-input" 
                        placeholder="sk-... (l·∫•y t·ª´ https://platform.openai.com/api-keys)"
                        autocomplete="off">
                    <small style="color: #666; margin-top: 3px; display: block;">
                        ‚ö†Ô∏è Gi·ªØ b√≠ m·∫≠t - Kh√¥ng share v·ªõi ai
                    </small>
                </div>
                
                <!-- Status Message -->
                <div id="api-status" class="api-status hidden"></div>
                
                <!-- Test Button -->
                <button id="test-api-btn" class="btn btn-secondary">üîç Ki·ªÉm Tra API</button>
            </div>
            
            <!-- Help Section -->
            <div class="modal-help">
                <strong>üí° M·∫πo:</strong>
                <ul style="margin: 8px 0 0 20px; padding: 0;">
                    <li>ƒê·ªÉ tr·ªëng (b·ªè qua) ‚Üí ch∆°i v·ªõi hardcoded messages</li>
                    <li>OpenAI c·∫•p <strong>$5 free credit</strong> cho ng∆∞·ªùi d√πng m·ªõi</li>
                    <li>ƒê·ªÉ l·∫•y API key: <a href="https://platform.openai.com/api-keys" target="_blank" style="color: #0066cc;">Truy c·∫≠p OpenAI Dashboard</a></li>
                </ul>
            </div>
            
            <div class="modal-footer">
                <div class="modal-footer-start" id="modal-footer-start">
                    <button id="skip-api-btn" class="btn btn-outline">üì≠ B·ªè Qua (Ch∆°i kh√¥ng API)</button>
                    <button id="start-game-btn" class="btn btn-primary">‚ñ∂Ô∏è B·∫Øt ƒê·∫ßu Game</button>
                </div>
                <div class="modal-footer-settings hidden" id="modal-footer-settings">
                    <button id="close-api-btn" class="btn btn-outline">ƒê√≥ng</button>
                    <button id="save-api-btn" class="btn btn-primary">L∆∞u v√† √°p d·ª•ng</button>
                </div>
            </div>
        </div>
    </div>

    <div id="game-container" class="hidden">
        <canvas id="game-canvas"></canvas>
        <div id="ui-overlay">
            <!-- NPC Dialog Box (dialog + tr√™u ch·ªçc AI d√πng chung) -->
            <div id="npc-dialog-box" class="npc-dialog-box hidden">
                <div class="npc-dialog-header">
                    <span id="npc-name" class="npc-name">NPC</span>
                    <button id="npc-dialog-close-btn" class="npc-dialog-close-btn" title="ƒê√≥ng">√ó</button>
                </div>
                <div class="npc-dialog-body">
                    <div id="npc-dialog-text" class="npc-dialog-text">
                        Xin ch√†o!
                    </div>
                </div>
                <div class="npc-dialog-footer">
                    <!-- Next button ·∫©n - ch·ªâ auto-close theo timer -->
                </div>
            </div>
            
            <div id="controls">
                <button id="toggle-api-btn" class="control-btn" title="B·∫≠t/t·∫Øt c·ª≠a s·ªï c·∫•u h√¨nh API">‚öôÔ∏è API</button>
                <button id="mute-ai-btn" class="control-btn">üîá Mute AI</button>
            </div>
            <div id="demo-dialogs" class="demo-dialogs">
                <span class="demo-label">Demo:</span>
                <button type="button" class="demo-btn" data-dialog="intro">Intro</button>
                <button type="button" class="demo-btn" data-dialog="stage1">Stage 1</button>
                <button type="button" class="demo-btn" data-dialog="stage2">Stage 2</button>
                <button type="button" class="demo-btn" data-dialog="stage3">Stage 3</button>
                <button type="button" class="demo-btn" data-dialog="stage4">Stage 4</button>
                <button type="button" class="demo-btn" data-dialog="ending">Ending</button>
            </div>
            <div id="stats">
                <div>Deaths: <span id="death-count">0</span></div>
                <div>Idle: <span id="idle-time">0.0s</span></div>
            </div>
        </div>
    </div>
    
    <script type="module" src="./js/main.js"></script>
</body>
</html>
